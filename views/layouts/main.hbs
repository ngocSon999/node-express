<!DOCTYPE html>
<html lang="{{currentLocale}}">
<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">
</head>
<body>
   <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <nav id="sidebar" class="bg-light border-end d-none d-md-block">
      <div class="sidebar-heading px-3 pt-4 fw-bold">{{t 'common.adminPanel'}}</div>
      <div class="list-group list-group-flush">
        <a href="{{ routes 'dashboard'}}" class="list-group-item list-group-item-action">{{t 'common.dashboard'}}</a>
        <a href="{{ routes 'userManage'}}" class="list-group-item list-group-item-action">{{t 'common.users'}}</a>
        <a href="{{ routes 'roleManage'}}" class="list-group-item list-group-item-action">{{t 'common.roles'}}</a>
      </div>
    </nav>

    <!-- Page Content -->
    <div id="page-content-wrapper" class="flex-grow-1">
      <!-- Top bar -->
      <nav class="navbar navbar-light bg-white border-bottom px-3">
        <div class="d-flex justify-content-between w-100 align-items-center">
          <button class="btn btn-outline-primary d-md-none" id="menu-toggle">â˜°</button>
          <div class="d-flex align-items-center gap-3">
            <!-- Language Switcher -->
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-globe"></i>
                {{#if (eq currentLocale 'en')}}
                  {{t 'common.english'}}
                {{else}}
                  {{t 'common.vietnamese'}}
                {{/if}}
              </button>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
                <li><a class="dropdown-item {{#if (eq currentLocale 'en')}}active{{/if}}" href="/language/en">{{t 'common.english'}}</a></li>
                <li><a class="dropdown-item {{#if (eq currentLocale 'vi')}}active{{/if}}" href="/language/vi">{{t 'common.vietnamese'}}</a></li>
              </ul>
            </div>
            <!-- User Dropdown -->
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                {{#if user.avatar}}
                  <img src="{{user.avatar}}" alt="{{user.name}}" class="rounded-circle" width="30" height="30">
                {{else}}
                  <i class="bi bi-person-circle"></i>
                {{/if}}
                {{user.name}}
              </button>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                <li><a class="dropdown-item" onclick="logout()">{{t 'common.logout'}}</a></li>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <div class="container-fluid py-4">
        {{{body}}}
      </div>
    </div>
  </div>

  <div id="alertBox"></div>

 <script>
  window.currentUser = {{#if user}}{{{ json user }}}{{else}}{}{{/if}};
  window.routes = {
    login: '{{ routes "login" }}',
    dashboard: '{{ routes "dashboard" }}',
    userManage: '{{ routes "userManage" }}',
    roleManage: '{{ routes "roleManage" }}'
  };
</script>

  <script src="/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>

  <script src="/js/helpers.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>
